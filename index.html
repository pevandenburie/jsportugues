<!DOCTYPE=html>

<html>

<head>
  <title>JsPortuguese</title>
  <link rel="shortcut icon" type="image/png" href="flag_icon_pt.gif" />
  
  <script>
    /*var _  = require('underscore');

    // Import Underscore.string to separate object, because there are conflict functions (include, reverse, contains)
    _.str = require('underscore.string');

    // Mix in non-conflict functions to Underscore namespace if you want
    _.mixin(_.str.exports());

    // All functions, include conflict, will be available through _.str object
    _.str.include('Underscore.string', 'string'); // => true*/
  </script>
  <!-- <script type="text/javascript" src="underscore-min.js"> </script> >
  <script type="text/javascript" src="underscore.string.min.js"> </script> -->
  <script type="text/javascript" src="imperfeito.js" charset="UTF-8"> </script>
  <script type="text/javascript" src="preterito.js" charset="UTF-8"> </script>
</head>

<body>
  JsPortuguese

  <div>
    <select id="subject" name="subject"></select>
    <input type="text" id="verb"></input>
    <button id="noimperfeito">No imperfeito</button>
    <button id="nopreterito">No preterito</button>
    <div id="translatedText">...</div>
  </div>
  
  <script>
  var isImperfeitoNoPreterito = true;
  
  var conjugueNoImperfeito = function() {
    console.log("conjugueNoImperfeito...");
    var subject = document.getElementById("subject").value;
    var verb =  document.getElementById("verb").value;
    var translatedText = document.getElementById("translatedText");
    
    translatedText.innerText = noimperfeito(subject, verb);
    
    //e.preventDefault(); // http://stackoverflow.com/questions/7195844/writing-text-on-div-using-javascript
    
    isImperfeitoNoPreterito = true;
  }
  
  var conjugueNoPreterito = function() {
    console.log("conjugueNoPreterito...");
    var subject = document.getElementById("subject").value;
    var verb =  document.getElementById("verb").value;
    var translatedText = document.getElementById("translatedText");
    
    translatedText.innerText = nopreterito(subject, verb);
    
    isImperfeitoNoPreterito = false;
  }
  
  function updateLastConjuging() {
    if (isImperfeitoNoPreterito) {
        conjugueNoImperfeito();
    }
    else {
        conjugueNoPreterito();
    }
  }
  
  document.getElementById('noimperfeito').onclick = conjugueNoImperfeito;
  document.getElementById('nopreterito').onclick = conjugueNoPreterito;
  
  // Fill the list of subjects
  var subjectList = document.getElementById('subject');
  var subjects = Object.keys(subjectTerminaisonIndexes); // Get it from our portuguese JS module
  var i = 0;
  var option;
  for (i=0; i<subjects.length; i+=1) {
    option = document.createElement("option");
    option.text = subjects[i];
    option.value = subjects[i];
    subjectList.add(option);
  }
  subjectList.onchange = updateLastConjuging;
  
  </script>

</body>

</html>
